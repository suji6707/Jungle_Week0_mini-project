{% extends "base.html" %} {% block title %}메인페이지{% endblock %} {% block
head %} {{ super() }}
<script>
  $(document).ready(function () {
    showGroup();
  });

  function showGroup() {
    $.ajax({
      method: "GET",
      url: "/show",
      data: {},
      success: function (response) {
        let lists = response["lists"];
        for (let i = 0; i < lists.length; i++) {
          makeCard(lists[i]["name"], lists[i]["price"], lists[i]["imgUrl"]);
        }
      },
    });
  }

  function makeCard(name, price, imgUrl) {
    let temp = `
                <li class="card-content list-group-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <image class="product-image" src=${imgUrl}>
                        <div class="ms-2 me-auto">
                            <div class="fw-bold">${name}</div>
                                <p>가격: ${price}원</p>
                        </div>
                        <span class="badge bg-primary rounded-pill"></span>
                    </div>
                    <footer class="card-footer">
                        <a class="card-footer-item has-text-info" onclick="likeit('${name}')">
                            좋아요!
                            <span class="icon">
                                <i class="fa fa-thumbs-up fa-lg"></i>
                            </span>
                        </a>
                        <a class="card-footer-item has-text-danger" onclick="dislike('${name}')">
                            싫어요!
                            <span class="icon">
                                <i class="fa fa-thumbs-down fa-lg"></i>
                            </span>
                        </a>
                    </footer>
                </li>`;

    $("#list-box").append(temp);
  }

  function submitLink() {
    // url ajaxPOST 요청.
    let url = $("#url").val();

    $.ajax({
      method: "POST",
      url: "/submit",
      data: { url: url },
      success: function (response) {
        if (response["return"] == "success") {
          alert("저장 완료!");
          window.location.reload();
        }
      },
    });
  }
</script>

{% endblock %} {% block body %}
<div class="jumbotron">
  <h1 class="display-4">관심상품 등록하기</h1>
  <p class="lead">관심있는 상품을 등록하고 공동구매를 하는 공간입니다!</p>
  <div class="form-group">
    <input
      type="text"
      class="form-control"
      id="url"
      placeholder="상품명을 입력하세요"
    />
  </div>
  <p class="lead">
    <a
      onclick="submitLink()"
      class="btn btn-primary btn-lg"
      href="#"
      role="button"
      >링크 등록</a
    >
  </p>
</div>

<div class="list" id="list-box">
  <ol class="list-group list-group-numbered">
    <!-- showCards -->
    {% endblock %}
  </ol>
</div>
